class CoursWatcher extends EventTarget{constructor(t=1e3){super(),this.lastCours="",this.handleInterval=void 0,this.interval=t,this.start()}stop(){this.handleInterval&&(clearInterval(this.handleInterval),this.handleInterval=void 0)}start(){null==this.handleInterval&&(this.handleInterval=setInterval(async()=>{try{var t=await(await fetch("/coursEuroDollar",{signal:AbortSignal.timeout(.8*this.interval)})).json();this.lastCours!=JSON.stringify(t)&&(this.dispatchEvent(new CustomEvent("change",{detail:t})),this.lastCours=JSON.stringify(t))}catch(t){this.dispatchEvent(new CustomEvent("error",{detail:new Error("Cours non disponible")}))}},this.interval))}get interval(){return this._interval}set interval(t){if(t<=0)throw new Error("Interval non valide");this._interval=t}}export{CoursWatcher};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL0NvdXJzV2F0Y2hlci50cyJdLCJuYW1lcyI6WyJDb3Vyc1dhdGNoZXIiLCJFdmVudFRhcmdldCIsImNvbnN0cnVjdG9yIiwiaW50ZXJ2YWwiLCJzdXBlciIsInRoaXMiLCJsYXN0Q291cnMiLCJoYW5kbGVJbnRlcnZhbCIsInVuZGVmaW5lZCIsInN0YXJ0Iiwic3RvcCIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImFzeW5jIiwiZHRvIiwiYXdhaXQiLCJmZXRjaCIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwidGltZW91dCIsImpzb24iLCJKU09OIiwic3RyaW5naWZ5IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiZXJyb3IiLCJFcnJvciIsIl9pbnRlcnZhbCIsInZhbHVlIl0sIm1hcHBpbmdzIjoiTUFFYUEscUJBQXFCQyxZQUM5QkMsWUFBWUMsRUFBZ0IsS0FDeEJDLE1BQUssRUFNVEMsS0FBQUMsVUFBaUIsR0FDakJELEtBQUFFLGVBQW1CQyxLQUFBQSxFQU5mSCxLQUFLRixTQUFTQSxFQUNkRSxLQUFLSSxNQUFLLENBR2QsQ0FHQUMsT0FDT0wsS0FBS0UsaUJBQ0pJLGNBQWNOLEtBQUtFLGNBQWMsRUFDakNGLEtBQUtFLGVBQWVDLEtBQUFBLEVBRzVCLENBQ0FDLFFBQzRCRCxNQUFyQkgsS0FBS0UsaUJBQ0pGLEtBQUtFLGVBQWVLLFlBQVlDLFVBQzVCLElBQ0ksSUFDTUMsRUFBSUMsTUFERkEsTUFBTUMsTUFBTSxtQkFBbUIsQ0FBQ0MsT0FBUUMsWUFBWUMsUUFBc0IsR0FBZGQsS0FBS0YsUUFBWSxDQUFDLENBQUUsR0FDdEVpQixLQUFJLEVBQ25CZixLQUFLQyxXQUFXZSxLQUFLQyxVQUFVUixDQUFHLElBRWpDVCxLQUFLa0IsY0FBYyxJQUFJQyxZQUFzQixTQUFTLENBQUNDLE9BQU9YLENBQUcsQ0FBQyxDQUFDLEVBQ25FVCxLQUFLQyxVQUFVZSxLQUFLQyxVQUFVUixDQUFHLEVBS3pDLENBRkUsTUFBT1ksR0FDTHJCLEtBQUtrQixjQUFjLElBQUlDLFlBQW1CLFFBQVEsQ0FBQ0MsT0FBTyxJQUFJRSxNQUFNLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUNqRyxDQUVKLEVBQUV0QixLQUFLRixRQUFRLEVBR3ZCLENBS0FBLGVBQ0ksT0FBT0UsS0FBS3VCLFNBQ2hCLENBQ0F6QixhQUFvQjBCLEdBQ2hCLEdBQUdBLEdBQU8sRUFDTixNQUFNLElBQUlGLE1BQU0scUJBQXFCLEVBRXpDdEIsS0FBS3VCLFVBQVlDLENBQ3JCLEMsUUFqRFM3QixZIiwiZmlsZSI6InNlcnZpY2VzL0NvdXJzV2F0Y2hlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvdXJzRHRvIH0gZnJvbSBcIi4uL2R0by9jb3Vycy1kdG9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb3Vyc1dhdGNoZXIgZXh0ZW5kcyBFdmVudFRhcmdldHtcclxuICAgIGNvbnN0cnVjdG9yKGludGVydmFsOm51bWJlcj0xMDAwKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWw9aW50ZXJ2YWw7XHJcbiAgICAgICAgdGhpcy5zdGFydCgpO1xyXG5cclxuXHJcbiAgICB9XHJcbiAgICBsYXN0Q291cnM6c3RyaW5nPVwiXCI7XHJcbiAgICBoYW5kbGVJbnRlcnZhbDphbnk9dW5kZWZpbmVkO1xyXG4gICAgc3RvcCgpe1xyXG4gICAgICAgIGlmKHRoaXMuaGFuZGxlSW50ZXJ2YWwpe1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaGFuZGxlSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUludGVydmFsPXVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgIH1cclxuICAgIHN0YXJ0KCl7XHJcbiAgICAgICAgaWYodGhpcy5oYW5kbGVJbnRlcnZhbD09dW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVJbnRlcnZhbD1zZXRJbnRlcnZhbChhc3luYyAoKT0+e1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByPWF3YWl0IGZldGNoKFwiL2NvdXJzRXVyb0RvbGxhclwiLHtzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy5pbnRlcnZhbCowLjgpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGR0bz1hd2FpdCByLmpzb24oKSBhcyBDb3Vyc0R0bztcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmxhc3RDb3VycyE9SlNPTi5zdHJpbmdpZnkoZHRvKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtw6lsaW9yYXRpb24gOiBsJ8OpdsOobmVtZW50IG4nZXN0IGTDqWNsZW5jaMOpIHF1ZSBzaSBsJ29iamV0IHJlw6d1IGVzdCBkaWZmw6lyZW50IGRlIGwnYW5jaWVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQ8Q291cnNEdG8+KFwiY2hhbmdlXCIse2RldGFpbDpkdG99KSk7ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0Q291cnM9SlNPTi5zdHJpbmdpZnkoZHRvKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQ8RXJyb3I+KFwiZXJyb3JcIix7ZGV0YWlsOm5ldyBFcnJvcihcIkNvdXJzIG5vbiBkaXNwb25pYmxlXCIpfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSx0aGlzLmludGVydmFsKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gUHJvcHJpw6l0w6kgaW50ZXJ2YWxsZVxyXG4gICAgcHJpdmF0ZSBfaW50ZXJ2YWwhOm51bWJlcjtcclxuICAgIHB1YmxpYyBnZXQgaW50ZXJ2YWwoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJ2YWw7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGludGVydmFsKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBpZih2YWx1ZTw9MCl7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludGVydmFsIG5vbiB2YWxpZGVcIilcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuXHJcblxyXG5cclxuXHJcbn0iXX0=
